<div class="relative py-1">
  <div [formGroup]="formGroup">
    <input type="password" [id]="fieldName" [type]="isPasswordVisible ? 'text' : 'password'"
      [formControlName]="fieldName" [ngClass]="classFilled" class="valid" [placeholder]="label" />
    <button type="button" (click)="togglePasswordVisibility()" class="absolute top-1 end-0 p-3.5 rounded-e-md">
      @if (isPasswordVisible) {
      <svg-icon [src]="iconEyeOpen"> </svg-icon>
      } @else {
      <svg-icon [src]="iconEyeClose"> </svg-icon>
      }
    </button>
  </div>
  @if (isInvalid) {
    @if (!isValidLength && !hasUpperCase && !hasLowerCase && !hasNumeric && !hasSpecialChar) {
       <p class="errors-message">{{ errorMessage }}</p>
    } @else {
      @if (errorMessage.includes("Passwords do not match")) {
        <p class="errors-message">{{ errorMessage }}</p>
      } @else {
        <div class="absolute z-10 w-full bg-gray-100 rounded-lg p-4 dark:bg-neutral-950">
          <h4 class="mt-3 text-sm font-semibold text-gray-800 dark:text-white">
            Your password must contain:
          </h4>

          <ul class="space-y-1 text-sm text-gray-500 dark:text-neutral-500">
            <li class="hs-strong-password-active:text-teal-500 flex items-center gap-x-2">
              @if(isValidLength) {
              <svg-icon [src]="iconChecklist"></svg-icon>
              } @else {
              <svg-icon [src]="iconClose"></svg-icon>
              } Minimum number of characters is 6.
            </li>
            <li class="hs-strong-password-active:text-teal-500 flex items-center gap-x-2">
              @if(hasUpperCase) {
              <svg-icon [src]="iconChecklist"></svg-icon>
              } @else {
              <svg-icon [src]="iconClose"></svg-icon>
              } Should contain uppercase.
            </li>
            <li class="hs-strong-password-active:text-teal-500 flex items-center gap-x-2">
              @if(hasLowerCase) {
              <svg-icon [src]="iconChecklist"></svg-icon>
              } @else {
              <svg-icon [src]="iconClose"></svg-icon>
              } Should contain lowercase.
            </li>
            <li class="hs-strong-password-active:text-teal-500 flex items-center gap-x-2">
              @if(hasNumeric) {
              <svg-icon [src]="iconChecklist"></svg-icon>
              } @else {
              <svg-icon [src]="iconClose"></svg-icon>
              } Should contain numbers.
            </li>
            <li class="hs-strong-password-active:text-teal-500 flex items-center gap-x-2">
              @if(hasSpecialChar) {
              <svg-icon [src]="iconChecklist"></svg-icon>
              } @else {
              <svg-icon [src]="iconClose"></svg-icon>
              } Should contain special characters.
            </li>
          </ul>
        </div>
      }
    }
  }
</div>
